<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ocra-wbi-plugins: ZmpController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ocra-wbi-plugins
   </div>
   <div id="projectbrief">Doxygen documentation for the ocra-wbi-plugins repository</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classZmpController-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ZmpController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementes a ZMP controller as a force set point regulator.  
 <a href="classZmpController.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ZmpController_8h_source.html">ZmpController.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a401013c4cc1d215972062b027e11e619"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classZmpController.html#a401013c4cc1d215972062b027e11e619">ZmpController</a> (const int period, struct <a class="el" href="structZmpControllerParams.html">ZmpControllerParams</a> parameters)</td></tr>
<tr class="separator:a401013c4cc1d215972062b027e11e619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af308a70e70cfe9a1e9569606da8b1739"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classZmpController.html#af308a70e70cfe9a1e9569606da8b1739">~ZmpController</a> ()</td></tr>
<tr class="separator:af308a70e70cfe9a1e9569606da8b1739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b6978770bbba4f1041f938d9f1308f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classZmpController.html#ae6b6978770bbba4f1041f938d9f1308f">computehd</a> (Eigen::Vector2d pd, Eigen::Vector2d &amp;dhd)</td></tr>
<tr class="separator:ae6b6978770bbba4f1041f938d9f1308f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementes a ZMP controller as a force set point regulator. </p>
<dl class="section note"><dt>Note</dt><dd>Put original ZMP preview control reference along with Aurelien's</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jorhabib Eljaik</dd></dl>
<p><a class="el" href="citelist.html#CITEREF_krause2012stabilization">[3]</a></p>
<dl class="section warning"><dt>Warning</dt><dd>Work in progress! This is still a barebone class in the process of being tested.</dd></dl>
<p>In <a class="el" href="citelist.html#CITEREF_krause2012stabilization">[3]</a> a position-based ZMP controller was implemented by relating the desired ZMP \( \mathbf{p}_d \) to a desired force, given the relationship between CoM acceleration and the ZMP. When the dynamical effects of the vertical motion of the robot together with the change of angular momentum are neglected, the horizontal location of the ZMP \(\mathbf{p} = (p_x, p_y)\) can be computed as: <a class="anchor" id="simplifiedZMP"></a> </p><p class="formulaDsp">
\begin{equation} \ddot{h} = \omega^2(\mathbf{h} - \mathbf{p}) \end{equation}
</p>
<p>Where \(\omega = \sqrt{g/c_z}\) as done in <a class="el" href="citelist.html#CITEREF_kajita2003biped">[2]</a>. Therefore the desired \(\mathbf{p}_d\) can be associated to a desired force on the CoM: </p><p class="formulaDsp">
\[ F_d = m \omega^2 (\mathbf{h} - \mathbf{p}_d) \]
</p>
<p> Where \(m\) is the total mass of the robot and a force set point regulator can be implemented as: </p><p class="formulaDsp">
\[ \dot{\mathbf{h}}_d = k_f(F_d - F) \]
</p>
<p> Where \(k_f &gt; 0\) is a force control gain. Substituting <a class="el" href="classZmpController.html#simplifiedZMP">simplifiedZMP</a> we get: </p><p class="formulaDsp">
\[ \dot{\mathbf{h}}_d = k_f m \omega^2(\mathbf{p} - \mathbf{p}_d) \]
</p>
 </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a401013c4cc1d215972062b027e11e619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401013c4cc1d215972062b027e11e619">&sect;&nbsp;</a></span>ZmpController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZmpController::ZmpController </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structZmpControllerParams.html">ZmpControllerParams</a>&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af308a70e70cfe9a1e9569606da8b1739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af308a70e70cfe9a1e9569606da8b1739">&sect;&nbsp;</a></span>~ZmpController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ZmpController::~ZmpController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae6b6978770bbba4f1041f938d9f1308f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6b6978770bbba4f1041f938d9f1308f">&sect;&nbsp;</a></span>computehd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ZmpController::computehd </td>
          <td>(</td>
          <td class="paramtype">Eigen::Vector2d&#160;</td>
          <td class="paramname"><em>pd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>dhd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Computes the instantaneous desired horizonal COM velocity for the corresponding desired zmp position.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pd</td><td>Horizontal desired zmp position </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dhd</td><td>Horizonal CoM velocity \(\dot{\mathbf{h}}_d\) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/jorhabibeljaik/Code/codyco-superbuild/main/ocra-wbi-plugins/ocra-icub-clients/walking-client/include/walking-client/<a class="el" href="ZmpController_8h_source.html">ZmpController.h</a></li>
<li>/Users/jorhabibeljaik/Code/codyco-superbuild/main/ocra-wbi-plugins/ocra-icub-clients/walking-client/src/<a class="el" href="ZmpController_8cpp.html">ZmpController.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 29 2016 13:19:24 for ocra-wbi-plugins by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
